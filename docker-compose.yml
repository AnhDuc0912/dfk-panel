version: '3.8'

services:
  dfkpanel:
    build: .
    env_file:
      - .env
    ports:
      - "${PORT:-3333}:3333"
    # Environment variables are loaded from .env via `env_file` above.
    # They will be available inside the container automatically without listing them here.
    volumes:
      # Mount host folder to the same path used by ROOT_DIR so files created from the UI appear on host.
      # Set HOST_REPO_DIR to an absolute host path to control where host files are stored.
      # Default host path falls back to ./repos and is mounted to the container path given by ROOT_DIR.
      - "${HOST_REPO_DIR:-./repos}:${ROOT_DIR:-./repos}:rw"
      # Optionally bind a host path for NGINX_SITES_DIR if you want the panel to write there.
      # To enable, set HOST_SITES_DIR in .env and uncomment the following line.
      # - "${HOST_SITES_DIR}:${NGINX_SITES_DIR:-/etc/nginx/sites-enabled}"
    user: "${UID:-1000}:${GID:-1000}"
    restart: unless-stopped
